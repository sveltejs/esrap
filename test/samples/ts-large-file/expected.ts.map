{
  "version": 3,
  "names": [],
  "sources": [
    "input.js"
  ],
  "sourcesContent": [
    "import path from 'node:path';\nimport * as v from 'valibot';\nimport { Command } from 'commander';\nimport * as p from '@svelte-cli/clack-prompts';\nimport pc from 'picocolors';\nimport {\n\texecuteCli,\n\tformatFiles,\n\tgetGlobalPreconditions,\n\tsuggestInstallingDependencies,\n\trunCommand\n} from '../common.js';\nimport { adderCategories, categories, adderIds } from '@svelte-cli/adders';\nimport { getAdderConfig, getAdderDetails } from '../../adders/index.js';\nimport {\n\tcreateOrUpdateFiles,\n\tcreateWorkspace,\n\tfindUp,\n\tinstallPackages,\n\tTESTING\n} from '@svelte-cli/core/internal';\nimport {\n\ttype ExternalAdderConfig,\n\ttype InlineAdderConfig,\n\ttype OptionDefinition,\n\ttype OptionValues\n} from '@svelte-cli/core';\n\nconst AddersSchema = v.array(v.string());\nconst OptionsSchema = v.strictObject({\n\tcwd: v.string(),\n\tinstall: v.boolean(),\n\tpreconditions: v.boolean(),\n\tdefault: v.boolean(),\n\tcommunity: AddersSchema\n});\ntype Options = v.InferOutput<typeof OptionsSchema>;\n\nconst adderDetails = adderIds.map((id) => getAdderDetails(id));\nconst aliases = adderDetails.map((c) => c.config.metadata.alias).filter((v) => v !== undefined);\n\n// infers the workspace cwd if a `package.json` resides in a parent directory\nconst defaultPkgPath = findUp(process.cwd(), 'package.json');\nconst defaultCwd = defaultPkgPath ? path.dirname(defaultPkgPath) : undefined;\n\nexport const add = new Command('add')\n\t.description('Applies specified adders into a project')\n\t.argument('[adder...]', 'adders to install')\n\t.option('--cwd <path>', 'path to working directory', defaultCwd)\n\t.option('--no-install', 'skips installing dependencies')\n\t.option('--no-preconditions', 'skips validating preconditions')\n\t.option('--default', 'applies default adder options for unspecified options', false)\n\t.option('--community <adder...>', 'community adders to install', [])\n\t.action((adderArgs, opts) => {\n\t\t// validate workspace\n\t\tif (opts.cwd === undefined) {\n\t\t\tconsole.error(\n\t\t\t\t'Invalid workspace: Please verify that you are inside of a Svelte project. You can also specify the working directory with `--cwd <path>`'\n\t\t\t);\n\t\t\tprocess.exit(1);\n\t\t}\n\n\t\tconst adders = v.parse(AddersSchema, adderArgs);\n\t\tconst options = v.parse(OptionsSchema, opts);\n\n\t\tconst invalidAdders = adders.filter((a) => !adderIds.includes(a) && !aliases.includes(a));\n\t\tif (invalidAdders.length > 0) {\n\t\t\tconsole.error(`Invalid adders specified: ${invalidAdders.join(', ')}`);\n\t\t\tprocess.exit(1);\n\t\t}\n\n\t\tconst dedupedIds = transformAliases(adders);\n\t\trunCommand(async () => {\n\t\t\tawait runAddCommand(options, dedupedIds);\n\t\t});\n\t});\n\nexport async function runAddCommand(options: Options, adders: string[]): Promise<void> {\n\tconst selectedAdders = adders.map((id) => getAdderDetails(id));\n\t// prompt which adders to apply\n\tif (selectedAdders.length === 0) {\n\t\tconst adderOptions: Record<string, Array<{ value: string; label: string }>> = {};\n\t\tconst workspace = createWorkspace(options.cwd);\n\t\tconst projectType = workspace.kit ? 'kit' : 'svelte';\n\t\tfor (const { id, name } of Object.values(categories)) {\n\t\t\tconst category = adderCategories[id];\n\t\t\tconst categoryOptions = category\n\t\t\t\t.map((id) => {\n\t\t\t\t\tconst config = getAdderConfig(id);\n\t\t\t\t\t// we'll only display adders within their respective project types\n\t\t\t\t\tif (projectType === 'kit' && !config.metadata.environments.kit) return;\n\t\t\t\t\tif (projectType === 'svelte' && !config.metadata.environments.svelte) return;\n\n\t\t\t\t\treturn { label: config.metadata.name, value: config.metadata.id };\n\t\t\t\t})\n\t\t\t\t.filter((c) => !!c);\n\n\t\t\tif (categoryOptions.length > 0) {\n\t\t\t\tadderOptions[name] = categoryOptions;\n\t\t\t}\n\t\t}\n\n\t\tconst selected = await p.groupMultiselect({\n\t\t\tmessage: 'What would you like to add to your project?',\n\t\t\toptions: adderOptions,\n\t\t\tspacedGroups: true,\n\t\t\tselectableGroups: false,\n\t\t\trequired: false\n\t\t});\n\t\tif (p.isCancel(selected)) {\n\t\t\tp.cancel('Operation cancelled.');\n\t\t\tprocess.exit(1);\n\t\t}\n\n\t\tselected.forEach((id) => selectedAdders.push(getAdderDetails(id)));\n\t}\n\n\t// run precondition checks\n\tif (options.preconditions) {\n\t\tconst preconditions = selectedAdders\n\t\t\t.flatMap((c) => c.checks.preconditions)\n\t\t\t.filter((p) => p !== undefined);\n\n\t\t// add global checks\n\t\tconst { kit } = createWorkspace(options.cwd);\n\t\tconst projectType = kit ? 'kit' : 'svelte';\n\t\tconst globalPreconditions = getGlobalPreconditions(options.cwd, projectType, selectedAdders);\n\t\tpreconditions.unshift(...globalPreconditions.preconditions);\n\n\t\tconst fails: Array<{ name: string; message?: string }> = [];\n\t\tfor (const condition of preconditions) {\n\t\t\tconst { message, success } = await condition.run();\n\t\t\tif (!success) fails.push({ name: condition.name, message });\n\t\t}\n\n\t\tif (fails.length > 0) {\n\t\t\tconst message = fails\n\t\t\t\t.map(({ name, message }) => pc.yellow(`${name} (${message})`))\n\t\t\t\t.join('\\n- ');\n\n\t\t\tp.note(`- ${message}`, 'Preconditions not met');\n\n\t\t\tconst force = await p.confirm({\n\t\t\t\tmessage: 'Preconditions failed. Do you wish to continue?',\n\t\t\t\tinitialValue: false\n\t\t\t});\n\t\t\tif (p.isCancel(force) || !force) {\n\t\t\t\tp.cancel('Operation cancelled.');\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst official: AdderOption = {};\n\tconst community = {};\n\n\t// TODO: apply specified options from flags\n\n\t// apply defaults to unspecified options\n\tif (options.default) {\n\t\tfor (const adder of selectedAdders) {\n\t\t\tconst adderId = adder.config.metadata.id;\n\t\t\tofficial[adderId] ??= {};\n\t\t\tfor (const [id, question] of Object.entries(adder.config.options)) {\n\t\t\t\tofficial[adderId][id] ??= question.default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// ask remaining questions\n\tfor (const adder of selectedAdders) {\n\t\tconst adderId = adder.config.metadata.id;\n\t\tconst questionPrefix = selectedAdders.length > 1 ? `${adder.config.metadata.name}: ` : '';\n\t\tofficial[adderId] ??= {};\n\t\tfor (const [questionId, question] of Object.entries(adder.config.options)) {\n\t\t\tconst shouldAsk = question.condition?.(official[adderId]);\n\t\t\tif (shouldAsk === false || official[adderId][questionId] !== undefined) continue;\n\n\t\t\tlet answer;\n\t\t\tconst message = questionPrefix + question.question;\n\t\t\tif (question.type === 'boolean') {\n\t\t\t\tanswer = await p.confirm({ message, initialValue: question.default });\n\t\t\t}\n\t\t\tif (question.type === 'select') {\n\t\t\t\tanswer = await p.select({\n\t\t\t\t\tmessage,\n\t\t\t\t\tinitialValue: question.default,\n\t\t\t\t\toptions: question.options\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (question.type === 'string' || question.type === 'number') {\n\t\t\t\tanswer = await p.text({\n\t\t\t\t\tmessage,\n\t\t\t\t\tinitialValue: question.default.toString()\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (p.isCancel(answer)) {\n\t\t\t\tp.cancel('Operation cancelled.');\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\n\t\t\tofficial[adderId][questionId] = answer;\n\t\t}\n\t}\n\n\t// apply adders\n\tlet filesToFormat: string[] = [];\n\tif (Object.keys({ ...official, ...community }).length > 0) {\n\t\tfilesToFormat = await installAdders({ cwd: options.cwd, official, community });\n\t\tp.log.success('Successfully installed adders');\n\t}\n\n\t// TODO: apply community adders\n\n\t// install dependencies\n\tlet depsStatus;\n\tif (options.install) {\n\t\tdepsStatus = await suggestInstallingDependencies(options.cwd);\n\t}\n\n\t// format modified/created files with prettier (if available)\n\tconst workspace = createWorkspace(options.cwd);\n\tif (filesToFormat.length > 0 && depsStatus === 'installed' && workspace.prettier) {\n\t\tconst formatSpinner = p.spinner();\n\t\tformatSpinner.start('Formatting modified files');\n\t\ttry {\n\t\t\tawait formatFiles(options.cwd, filesToFormat);\n\t\t\tformatSpinner.stop('Successfully formatted modified files');\n\t\t} catch (e) {\n\t\t\tformatSpinner.stop('Failed to format files');\n\t\t\tif (e instanceof Error) p.log.error(e.message);\n\t\t}\n\t}\n\n\t// print next steps\n\tconst nextStepsMsg = selectedAdders\n\t\t.filter((a) => a.config.integrationType === 'inline' && a.config.nextSteps)\n\t\t.map((a) => a.config as InlineAdderConfig<any>)\n\t\t.map((config) => {\n\t\t\tconst metadata = config.metadata;\n\t\t\tlet adderMessage = '';\n\t\t\tif (selectedAdders.length > 1) {\n\t\t\t\tadderMessage = `${pc.green(metadata.name)}:\\n`;\n\t\t\t}\n\n\t\t\tconst adderNextSteps = config.nextSteps!({\n\t\t\t\toptions: official[metadata.id],\n\t\t\t\tcwd: options.cwd,\n\t\t\t\tcolors: pc,\n\t\t\t\tdocs: metadata.website?.documentation\n\t\t\t});\n\t\t\tadderMessage += `- ${adderNextSteps.join('\\n- ')}`;\n\t\t\treturn adderMessage;\n\t\t})\n\t\t.join('\\n\\n');\n\tif (nextStepsMsg) p.note(nextStepsMsg, 'Next steps');\n}\n\ntype AdderId = string;\ntype QuestionValues = OptionValues<any>;\nexport type AdderOption = Record<AdderId, QuestionValues>;\n\nexport type InstallAdderOptions = {\n\tcwd: string;\n\tofficial?: AdderOption;\n\tcommunity?: AdderOption;\n};\n\n/**\n * Installs adders\n * @param options {InstallAdderOptions}\n * @returns a list of paths of modified files\n */\nexport async function installAdders({\n\tcwd,\n\tofficial = {}\n}: InstallAdderOptions): Promise<string[]> {\n\tconst adderDetails = Object.keys(official).map((id) => getAdderDetails(id));\n\n\t// adders might specify that they should be executed after another adder.\n\t// this orders the adders to (ideally) have adders without dependencies run first\n\t// and adders with dependencies runs later on, based on the adders they depend on.\n\t// based on https://stackoverflow.com/a/72030336/16075084\n\tadderDetails.sort((a, b) => {\n\t\tif (!a.config.runsAfter) return -1;\n\t\tif (!b.config.runsAfter) return 1;\n\n\t\treturn a.config.runsAfter.includes(b.config.metadata.id)\n\t\t\t? 1\n\t\t\t: b.config.runsAfter.includes(a.config.metadata.id)\n\t\t\t\t? -1\n\t\t\t\t: 0;\n\t});\n\n\t// apply adders\n\tconst filesToFormat = new Set<string>();\n\tfor (const { config } of adderDetails) {\n\t\tconst adderId = config.metadata.id;\n\t\tconst workspace = createWorkspace(cwd);\n\n\t\tworkspace.options = official[adderId];\n\n\t\t// execute adders\n\t\tif (config.integrationType === 'inline') {\n\t\t\tconst pkgPath = installPackages(config, workspace);\n\t\t\tfilesToFormat.add(pkgPath);\n\t\t\tconst changedFiles = createOrUpdateFiles(config.files, workspace);\n\t\t\tchangedFiles.forEach((file) => filesToFormat.add(file));\n\t\t} else if (config.integrationType === 'external') {\n\t\t\tawait processExternalAdder(config, cwd);\n\t\t} else {\n\t\t\tthrow new Error('Unknown integration type');\n\t\t}\n\t}\n\n\treturn Array.from(filesToFormat);\n}\n\nasync function processExternalAdder<Args extends OptionDefinition>(\n\tconfig: ExternalAdderConfig<Args>,\n\tcwd: string\n) {\n\tif (!TESTING) p.log.message(`Executing external command ${pc.gray(`(${config.metadata.id})`)}`);\n\n\ttry {\n\t\tawait executeCli('npx', config.command.split(' '), cwd, {\n\t\t\tenv: Object.assign(process.env, config.environment ?? {}),\n\t\t\tstdio: TESTING ? 'pipe' : 'inherit'\n\t\t});\n\t} catch (error) {\n\t\tconst typedError = error as Error;\n\t\tthrow new Error('Failed executing external command: ' + typedError.message);\n\t}\n}\n\n/**\n * Dedupes and transforms aliases into their respective adder id\n */\nfunction transformAliases(ids: string[]): string[] {\n\tconst set = new Set<string>();\n\tfor (const id of ids) {\n\t\tif (aliases.includes(id)) {\n\t\t\tconst adder = adderDetails.find((a) => a.config.metadata.alias === id)!;\n\t\t\tset.add(adder.config.metadata.id);\n\t\t} else {\n\t\t\tset.add(id);\n\t\t}\n\t}\n\treturn Array.from(set);\n}\n"
  ],
  "mappings": "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"
}